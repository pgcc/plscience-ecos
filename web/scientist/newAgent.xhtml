<ui:composition template="/WEB-INF/templates/layoutLogin.xhtml"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui">
    <ui:define name="content">
        <h2 class="page-header">Register Scientist</h2>
        
        <h:form id="newAgentForm">
            <p:growl id="growl" />
            <p:panel header="Scientist Data" style="margin: 10px 0;">
                <p:messages id="messages" />
                <h:panelGrid columns="3" cellpadding="5">
                    <h:outputLabel for="login" value="Login: *" />
                    <p:inputText id="login" 
                                 value="#{agentBean.agent.login}" 
                                 required="true" 
                                 label="Login"
                                 size="50">
                        <f:validateLength minimum="5" />
                    </p:inputText>
                    <p:message for="login" />

                    <h:outputLabel for="password" value="Password: *" />
                    <p:password id="password" 
                                value="#{agentBean.agent.password}" 
                                 required="true" 
                                 label="Password"
                                 size="50">
                        <f:validateLength minimum="5" />
                    </p:password>
                    <p:message for="password" />
                    
                    <h:outputLabel for="name" value="Name: *" />
                    <p:inputText id="name" 
                                 value="#{agentBean.agent.name}" 
                                 required="true" 
                                 label="Name"
                                 size="50">
                    </p:inputText>
                    <p:message for="name" />
                    
                    <h:outputLabel for="email" value="E-mail: *" />
                    <p:inputText id="email" 
                                 value="#{agentBean.agent.email}" 
                                 required="true" 
                                 label="E-mail"
                                 size="50">
                    </p:inputText>
                    <p:message for="email" />
                    
                    
                    
                    <p:outputLabel for="institution" value="Institution: *"  />
                    <p:selectOneMenu id="institution" value="#{agentBean.agent.institution}" converter="entityConverter" panelStyle="width:400px"
                                                     effect="fade" var="e" style="width:442px" filter="true" filterMatchMode="startsWith">
                            <f:selectItems value="#{entityBean.entitys}" var="entity" itemLabel="#{entity.acronym}" itemValue="#{entity}" />

                            <p:column>
                                    <h:outputText value="#{e.acronym}" />
                            </p:column>

                            <p:column>
                                    <h:outputText value="#{e.name}" />
                            </p:column>
                    </p:selectOneMenu>
                    <p:message for="institution" />
                    
                    <h:outputLabel for="role" value="Role: " />
                    <p:selectOneMenu id="role" value="#{agentBean.agent.role}" converter="rolerConverter" panelStyle="width:400px"
                                                     effect="fade" var="r" style="width:442px" filter="true" filterMatchMode="startsWith">
                        <f:selectItems value="#{rolerBean.rolers}" var="role" itemLabel="#{role.roleName}" itemValue="#{role}" />

                            <p:column>
                                    <h:outputText value="#{r.roleName}" />
                            </p:column>
                        
                    </p:selectOneMenu>
                    <p:message for="role" />
                    
                    <h:outputLabel for="competence" value="Competence: " />
                    <p:selectOneMenu id="competence" value="#{agentBean.agent.competence}" converter="competenceConverter" panelStyle="width:400px"
                                                     effect="fade" var="c" style="width:442px" filter="true" filterMatchMode="startsWith">
                        <f:selectItems value="#{competenceBean.competences}" var="competence" itemLabel="#{competence.competenceName}" itemValue="#{competence}" />

                            <p:column>
                                    <h:outputText value="#{c.competenceName}" />
                            </p:column>
                        
                    </p:selectOneMenu>
                    <p:message for="competence" />
                    
                    <h:outputLabel for="status" value="Initial Status: " />
                    <p:selectOneMenu id="status" value="#{agentBean.agent.status}" converter="statusConverter" panelStyle="width:400px"
                                                     effect="fade" var="s" style="width:442px" filter="true" filterMatchMode="startsWith">
                        <f:selectItems value="#{statusBean.statuss}" var="status" itemLabel="#{status.statusName}" itemValue="#{status}" />

                            <p:column>
                                    <h:outputText value="#{s.statusName}" />
                            </p:column>
                        
                    </p:selectOneMenu>
                    <p:message for="status" />
                    
                    <h:outputLabel for="description" value="Description: " />
                    <p:inputTextarea id="description" 
                                     value="#{agentBean.agent.description}"
                                     rows="2" 
                                     cols="52"  
                                     maxlength="250" 
                                     counterTemplate="{0} characters remaining." 
                                     autoResize="false" >
                    </p:inputTextarea>
                    <p:message for="description" />
                    
                </h:panelGrid>
                <p:commandButton id="saveBtn" value="Save" icon="ui-icon-check" style="margin:0" actionListener="#{agentBean.save()}" update="growl"/>
            </p:panel>
        </h:form>
        
    </ui:define>
</ui:composition>