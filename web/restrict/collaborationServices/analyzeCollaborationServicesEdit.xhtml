<ui:composition template="/WEB-INF/templates/layout.xhtml"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui">
    <ui:define name="content">
        <h2 class="page-header">Analyze Collaboration Services Edit</h2>
    
        <h:form id="newCollaborationServiceForm">
            <p:growl id="growl" />
            <p:panel id="panelAnalyze" header="Analyze" style="margin: 10px 0;" >
                <p:messages id="messages" />                    
                <h:panelGrid columns="2" cellpadding="3">
                    <h:outputText value="Id:" />
                    <h:outputText value="#{workspaceAlignment.interoperabilityStructXML.idStructXml}" />
                    <h:outputText value="Name:" />
                    <h:outputText value="#{workspaceAlignment.interoperabilityStructXML.interoperabilityName}" />                                       
                </h:panelGrid>
                <BR/>
                
                <p:commandButton value="Load Alignment" actionListener="#{workspaceAlignment.loadAlignment()}" update="tabConcepts" rendered="#{workspaceAlignment.interoperabilityStructXML.concepts == null}" />
                <BR/><BR/>
                
                <p:dataTable id="tabConcepts"
                            var="con" 
                            value="#{workspaceAlignment.interoperabilityStructXML.concepts}"
                            emptyMessage="No match found."
                            rendered="#{workspaceAlignment.interoperabilityStructXML.concepts != null and workspaceAlignment.interoperabilityStructXML.concepts.size() != 0}">
                    <f:facet name="header">Matching Table</f:facet>
                    <p:column headerText="Group Concept"> 
                        <h:outputText value="#{con.groupConcept}" />
                    </p:column>
                    <p:column headerText="Concept"> 
                        <h:outputText value="#{con.conceptService}" />
                    </p:column>
                    <p:column headerText="Has Element?"> 
                        <h:outputText value="#{con.hasElement}" />
                    </p:column>
                    <p:column headerText="Element Service 1"> 
                        <h:outputText value="#{con.conceptService1}" />
                        <p:commandButton icon="ui-icon-plusthick" id="viewDetailsS1" rendered="#{con.conceptService1 != null}" style="float:right" />
                        <p:overlayPanel id="viewDetailsS1Panel" for="viewDetailsS1" hideEffect="fade" dynamic="true" style="width:600px">
                            <h:form id="viewDetailsS1Form">
                                <h:outputLabel value="Details" for="descriptionService1" styleClass="panelGridLabel"/>
                                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="10">
                                    <h:outputLabel for="descriptionService1" value="Description: #{con.conceptService1}" />
                                    <h:outputText id="descriptionService1" value="#{con.descriptionService1}" />
                                </h:panelGrid>
                            </h:form>
                        </p:overlayPanel>
                    </p:column>
                    <p:column headerText="Element Service 2"> 
                        <h:outputText value="#{con.conceptService2}" />
                        <p:commandButton icon="ui-icon-plusthick" id="viewDetailsS2" rendered="#{con.conceptService2 != null}" style="float:right" />
                        <p:overlayPanel id="viewDetailsS2Panel" for="viewDetailsS2" hideEffect="fade" dynamic="true" style="width:600px">
                            <h:form id="viewDetailsS2Form">
                                <h:outputLabel value="Details" for="descriptionService2" styleClass="panelGridLabel"/>
                                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="10">
                                    <h:outputLabel for="descriptionService2" value="Description: #{con.conceptService2}" />
                                    <h:outputText id="descriptionService2" value="#{con.descriptionService2}" />
                                </h:panelGrid>
                            </h:form>
                        </p:overlayPanel>
                    </p:column>
                    <p:column headerText="Ratio"> 
                        <h:outputText value="#{con.ratio}" style="font-weight:bold; color:green" rendered="#{con.ratio.doubleValue() ge 60}" />
                        <h:outputText value="#{con.ratio}" style="font-weight:bold; color:red" rendered="#{con.ratio.doubleValue() lt 60}" />                                        
                    </p:column>                                 
                    <p:column headerText="Validity?"> 
                        <h:outputText value="#{con.validity}" style="font-weight:bold; color:green" rendered="#{con.validity == true}" />
                        <h:outputText value="#{con.validity}" style="font-weight:bold; color:red" rendered="#{con.validity == false}" />
                        <p:commandButton icon="ui-icon-note" id="viewNote" rendered="#{con.note != null and con.note.length() != 0}" style="float:right" />
                        <p:overlayPanel id="viewNotePanel" for="viewNote" hideEffect="fade" dynamic="true" style="width:600px">
                            <h:form id="viewNoteForm">
                                <h:outputLabel value="Note" for="note" styleClass="panelGridLabel"/>
                                <h:panelGrid columns="1" style="margin-bottom:10px" cellpadding="10">
                                    <h:outputText id="note" value="#{con.note}" />
                                </h:panelGrid>
                            </h:form>
                        </p:overlayPanel>
                    </p:column>
                    
                    <ui:remove>
                        <p:column headerText="Action">
                            <center>
                            <p:commandButton icon="ui-icon-pencil" value="Validity" onclick="PF('Edit').show();"> 
                                <f:setPropertyActionListener target="#{workspaceAlignment.interoperabilityStructXML.conceptXML}"
                                                             value="#{con}" />
                            </p:commandButton>
                            </center>
                        </p:column> 
                    </ui:remove>                    
                </p:dataTable>
            </p:panel>
        </h:form>  
    </ui:define>
</ui:composition>